<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .box {
            width: 400px;
            height: 400px;
            margin: auto;
            margin-top: 100px;
        }

        #num {
            text-align: center;
            width: 100px;
        }
    </style>
</head>

<body>
    <div class="box">
        <img src="../images/4f036ae4d45002b2a6fb6756cedebf02.png" alt="">
        <br>
        商品库存：
        <input type="button" id="cut" value="-">
        <input type="text" id="num" value="1">
        <input type="button" id="add" value="+">(仅剩8份库存)
        <br>
        商品价格:￥<i id="price">199</i>
        <br>
        商品总价：<span id="total">￥199.00</span>
    </div>
</body>
<script>
    cut = document.getElementById('cut');
    num = document.getElementById('num');
    add = document.getElementById('add');
    price = document.getElementById('price');
    total = document.getElementById('total');

    cut.onclick = function () {
        // 获取数量值
        var val = num.value;
        var pricex = price.innerHTML;
        // val=val-1,已经进行隐式转换
        val--;

        if (val <= 1) {
            val = 1;
        }
        num.value = val;
        // total.innerHTML = pricex.innerHTML * num.value;
        var totalPrice = val * pricex; //隐式转换
        total.innerHTML = '￥' + totalPrice.toFixed(2);
    }
    add.onclick = function () {
        var val = num.value;
        val++;

        if (val > 8) {
            val = 8;
            alert("已经是最大库存了");
        }
        num.value = val;
        // total.innerHTML = pricex.innerHTML * num.value;
        var totalPrice = val * price.innerHTML;
        // 保留两位小数：toFixed()
        total.innerHTML = '￥' + totalPrice.toFixed(2);
    }
    //内容发生改变的时候触发的条件
    num.oninput = function () {
        var val = num.value;
        var pricex = price.innerHTML;
        
        console.log(val);
        if (val < 1) {
            val = 1;
        } else if (val > 8) {
            val = 8;
            alert('不能超过8份');

        }
        num.value=val;
        var totalPrice = val * pricex; //隐式转换
        total.innerHTML = '￥' + totalPrice.toFixed(2);
    }
</script>

</html>